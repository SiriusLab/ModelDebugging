<?xml version="1.0" encoding="UTF-8"?>
<description:Group xmi:version="2.0" xmlns:xmi="http://www.omg.org/XMI" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:description="http://www.eclipse.org/sirius/description/1.1.0" xmlns:style="http://www.eclipse.org/sirius/description/style/1.1.0" xmlns:tool="http://www.eclipse.org/sirius/description/tool/1.1.0" name="Process" version="7.0.0">
  <ownedViewpoints name="Process" modelFileExtension="process">
    <ownedRepresentations xsi:type="description:DiagramDescription" name="ComposedTask" titleExpression="feature:name" domainClass="process.ComposedTask" enablePopupBars="true">
      <metamodel href="../../fr.obeo.dsl.process/model/process.ecore#/"/>
      <metamodel href="http://www.eclipse.org/sirius/1.1.0#/"/>
      <layout xsi:type="description:CompositeLayout" direction="LeftToRight"/>
      <defaultLayer name="Default">
        <nodeMappings name="Start" preconditionExpression="[self = diagram.target/]" deletionDescription="//@ownedViewpoints[name='Process']/@ownedRepresentations[name='ComposedTask']/@defaultLayer/@toolSections.0/@ownedTools[name='NoDeletion']" domainClass="process.ComposedTask">
          <style xsi:type="style:DotDescription" borderSizeComputationExpression="1" showIcon="false" labelExpression="Start" tooltipExpression="Start">
            <borderColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
            <labelColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
            <backgroundColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='gray']"/>
          </style>
        </nodeMappings>
        <nodeMappings name="End" preconditionExpression="[self = diagram.target/]" deletionDescription="//@ownedViewpoints[name='Process']/@ownedRepresentations[name='ComposedTask']/@defaultLayer/@toolSections.0/@ownedTools[name='NoDeletion']" domainClass="process.ComposedTask">
          <style xsi:type="style:DotDescription" borderSizeComputationExpression="1" showIcon="false" labelExpression="End" tooltipExpression="End">
            <borderColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
            <labelColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
            <backgroundColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='gray']"/>
          </style>
        </nodeMappings>
        <edgeMappings name="FollowingTask" deletionDescription="//@ownedViewpoints[name='Process']/@ownedRepresentations[name='ComposedTask']/@defaultLayer/@toolSections.0/@ownedTools[name='DeleteFollowingTask']" sourceMapping="//@ownedViewpoints[name='Process']/@ownedRepresentations[name='ComposedTask']/@defaultLayer/@containerMappings[name='ActionTask'] //@ownedViewpoints[name='Process']/@ownedRepresentations[name='ComposedTask']/@defaultLayer/@containerMappings[name='ComposedTask']/@borderedNodeMappings[name='EndNode']" targetMapping="//@ownedViewpoints[name='Process']/@ownedRepresentations[name='ComposedTask']/@defaultLayer/@containerMappings[name='ActionTask'] //@ownedViewpoints[name='Process']/@ownedRepresentations[name='ComposedTask']/@defaultLayer/@containerMappings[name='ComposedTask']/@borderedNodeMappings[name='StartNode']" targetFinderExpression="feature:followingTasks" reconnections="//@ownedViewpoints[name='Process']/@ownedRepresentations[name='ComposedTask']/@defaultLayer/@toolSections.0/@ownedTools[name='reconnect%20FollowingTask%20source'] //@ownedViewpoints[name='Process']/@ownedRepresentations[name='ComposedTask']/@defaultLayer/@toolSections.0/@ownedTools[name='reconnect%20FollowingTask%20target']">
          <style lineStyle="dash" sizeComputationExpression="1">
            <strokeColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='gray']"/>
          </style>
          <conditionnalStyles predicateExpression="[sourceView.oclAsType(DSemanticDecorator).target.oclAsType(Task).followingEdgeIsMandatory(targetView.oclAsType(DSemanticDecorator).target.oclAsType(Task))/]">
            <style sizeComputationExpression="1">
              <strokeColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='gray']"/>
            </style>
          </conditionnalStyles>
        </edgeMappings>
        <edgeMappings name="InitialTask" deletionDescription="//@ownedViewpoints[name='Process']/@ownedRepresentations[name='ComposedTask']/@defaultLayer/@toolSections.0/@ownedTools[name='DeleteInitialTask']" sourceMapping="//@ownedViewpoints[name='Process']/@ownedRepresentations[name='ComposedTask']/@defaultLayer/@nodeMappings[name='Start'] //@ownedViewpoints[name='Process']/@ownedRepresentations[name='ComposedTask']/@defaultLayer/@containerMappings[name='ComposedTask']/@borderedNodeMappings[name='StartNode']" targetMapping="//@ownedViewpoints[name='Process']/@ownedRepresentations[name='ComposedTask']/@defaultLayer/@containerMappings[name='ActionTask'] //@ownedViewpoints[name='Process']/@ownedRepresentations[name='ComposedTask']/@defaultLayer/@containerMappings[name='ComposedTask']/@borderedNodeMappings[name='StartNode']" targetFinderExpression="feature:initialTasks">
          <style lineStyle="dash" sizeComputationExpression="1">
            <strokeColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='gray']"/>
          </style>
          <conditionnalStyles predicateExpression="[targetView.oclAsType(DSemanticDecorator).target.oclAsType(Task).initialEdgeIsMandatory()/]">
            <style sizeComputationExpression="1">
              <strokeColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='gray']"/>
            </style>
          </conditionnalStyles>
        </edgeMappings>
        <edgeMappings name="FinalTask" deletionDescription="//@ownedViewpoints[name='Process']/@ownedRepresentations[name='ComposedTask']/@defaultLayer/@toolSections.0/@ownedTools[name='DeleteFinalTask']" sourceMapping="//@ownedViewpoints[name='Process']/@ownedRepresentations[name='ComposedTask']/@defaultLayer/@nodeMappings[name='End'] //@ownedViewpoints[name='Process']/@ownedRepresentations[name='ComposedTask']/@defaultLayer/@containerMappings[name='ComposedTask']/@borderedNodeMappings[name='EndNode']" targetMapping="//@ownedViewpoints[name='Process']/@ownedRepresentations[name='ComposedTask']/@defaultLayer/@containerMappings[name='ActionTask'] //@ownedViewpoints[name='Process']/@ownedRepresentations[name='ComposedTask']/@defaultLayer/@containerMappings[name='ComposedTask']/@borderedNodeMappings[name='EndNode']" targetFinderExpression="feature:finalTasks">
          <style lineStyle="dash" sourceArrow="InputArrow" targetArrow="NoDecoration" sizeComputationExpression="1">
            <strokeColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='gray']"/>
          </style>
          <conditionnalStyles predicateExpression="[sourceView.oclAsType(DSemanticDecorator).target.oclAsType(ComposedTask).finalEdgeIsMandatory(targetView.oclAsType(DSemanticDecorator).target.oclAsType(Task))/]">
            <style sourceArrow="InputArrow" targetArrow="NoDecoration" sizeComputationExpression="1">
              <strokeColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='gray']"/>
            </style>
          </conditionnalStyles>
        </edgeMappings>
        <containerMappings name="ComposedTask" preconditionExpression="[eContainer() = diagram.target or eContainer(process::ComposedTask).hasNoDiagram()/]" labelDirectEdit="//@ownedViewpoints[name='Process']/@ownedRepresentations[name='ComposedTask']/@defaultLayer/@toolSections.0/@ownedTools[name='TaskName']" semanticCandidatesExpression="feature:tasks" doubleClickDescription="//@ownedViewpoints[name='Process']/@ownedRepresentations[name='ComposedTask']/@defaultLayer/@toolSections.0/@ownedTools[name='ComposedTaskWithDiagramDoubleClick']" domainClass="process.ComposedTask" dropDescriptions="//@ownedViewpoints[name='Process']/@ownedRepresentations[name='ComposedTask']/@defaultLayer/@toolSections.0/@ownedTools[name='']" reusedContainerMappings="//@ownedViewpoints[name='Process']/@ownedRepresentations[name='ComposedTask']/@defaultLayer/@containerMappings[name='ActionTask'] //@ownedViewpoints[name='Process']/@ownedRepresentations[name='ComposedTask']/@defaultLayer/@containerMappings[name='ComposedTask']">
          <borderedNodeMappings name="StartNode" preconditionExpression="[self = container/]" deletionDescription="//@ownedViewpoints[name='Process']/@ownedRepresentations[name='ComposedTask']/@defaultLayer/@toolSections.0/@ownedTools[name='NoDeletion']" domainClass="process.ComposedTask">
            <style xsi:type="style:EllipseNodeDescription" showIcon="false" labelExpression="Start" tooltipExpression="Start" sizeComputationExpression="1">
              <borderColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
              <labelColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
              <color xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='gray']"/>
            </style>
          </borderedNodeMappings>
          <borderedNodeMappings name="EndNode" preconditionExpression="[self = container/]" deletionDescription="//@ownedViewpoints[name='Process']/@ownedRepresentations[name='ComposedTask']/@defaultLayer/@toolSections.0/@ownedTools[name='NoDeletion']" domainClass="process.ComposedTask">
            <style xsi:type="style:EllipseNodeDescription" showIcon="false" labelExpression="End" tooltipExpression="End" sizeComputationExpression="1">
              <borderColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
              <labelColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
              <color xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='gray']"/>
            </style>
          </borderedNodeMappings>
          <style xsi:type="style:FlatContainerStyleDescription" arcWidth="10" arcHeight="10" tooltipExpression="feature:description" roundedCorner="true">
            <borderColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='gray']"/>
            <labelColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
            <backgroundColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='orange']"/>
            <foregroundColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='light_orange']"/>
          </style>
        </containerMappings>
        <containerMappings name="ActionTask" preconditionExpression="[eContainer() = diagram.target or eContainer(process::ComposedTask).hasNoDiagram()/]" labelDirectEdit="//@ownedViewpoints[name='Process']/@ownedRepresentations[name='ComposedTask']/@defaultLayer/@toolSections.0/@ownedTools[name='TaskName']" semanticCandidatesExpression="feature:tasks" domainClass="process.ActionTask">
          <style xsi:type="style:FlatContainerStyleDescription" arcWidth="10" arcHeight="10" tooltipExpression="feature:description" roundedCorner="true">
            <borderColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='gray']"/>
            <labelColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
            <backgroundColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='yellow']"/>
            <foregroundColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='light_yellow']"/>
          </style>
        </containerMappings>
        <toolSections>
          <ownedTools xsi:type="tool:OperationAction" name="new Composed Task diagram" precondition="service:self.isComposedTask(views)" forceRefresh="true">
            <view name="views"/>
            <initialOperation>
              <firstModelOperations xsi:type="tool:Navigation" createIfNotExistent="true" diagramDescription="//@ownedViewpoints[name='Process']/@ownedRepresentations[name='ComposedTask']"/>
            </initialOperation>
          </ownedTools>
          <ownedTools xsi:type="tool:OperationAction" name="Toggle Final Task" icon="/fr.obeo.dsl.process.edit/icons/full/obj16/ActionTask_final.gif">
            <view name="views"/>
            <initialOperation>
              <firstModelOperations xsi:type="tool:ChangeContext" browseExpression="var:views">
                <subModelOperations xsi:type="tool:For" expression="views" iteratorName="view">
                  <subModelOperations xsi:type="tool:ChangeContext" browseExpression="view.target">
                    <subModelOperations xsi:type="tool:ExternalJavaAction" name="ToggleFinalTaskAction" icon="/fr.obeo.dsl.process.edit/icons/full/obj16/ActionTask_final.gif" id="fr.obeo.dsl.process.design.action.toggleFinalTask"/>
                  </subModelOperations>
                </subModelOperations>
              </firstModelOperations>
            </initialOperation>
          </ownedTools>
          <ownedTools xsi:type="tool:OperationAction" name="Toggle Initial Task" icon="/fr.obeo.dsl.process.edit/icons/full/obj16/ActionTask_initial.gif">
            <view name="views"/>
            <initialOperation>
              <firstModelOperations xsi:type="tool:ChangeContext" browseExpression="var:views">
                <subModelOperations xsi:type="tool:For" expression="views" iteratorName="view">
                  <subModelOperations xsi:type="tool:ChangeContext" browseExpression="view.target">
                    <subModelOperations xsi:type="tool:ExternalJavaAction" name="ToggleInitialTaskAction" icon="/fr.obeo.dsl.process.edit/icons/full/obj16/ActionTask_initial.gif" id="fr.obeo.dsl.process.design.action.toggleInitialTask"/>
                  </subModelOperations>
                </subModelOperations>
              </firstModelOperations>
            </initialOperation>
          </ownedTools>
          <ownedTools xsi:type="tool:OperationAction" name="Edit Precondition" precondition="service:self.isTask(views)" icon="/fr.obeo.dsl.process.edit/icons/full/obj16/Expression.gif">
            <view name="views"/>
            <initialOperation>
              <firstModelOperations xsi:type="tool:ExternalJavaAction" name="ToggleInitialTaskAction" icon="/fr.obeo.dsl.process.edit/icons/full/obj16/Expression.gif" id="fr.obeo.dsl.process.design.action.editPrecondition"/>
            </initialOperation>
          </ownedTools>
          <ownedTools xsi:type="tool:OperationAction" name="Edit Done Expression" precondition="service:self.isComposedTask(views)" icon="/fr.obeo.dsl.process.edit/icons/full/obj16/Expression.gif">
            <view name="views"/>
            <initialOperation>
              <firstModelOperations xsi:type="tool:ExternalJavaAction" name="ToggleInitialTaskAction" icon="/fr.obeo.dsl.process.edit/icons/full/obj16/Expression.gif" id="fr.obeo.dsl.process.design.action.editDoneExpression"/>
            </initialOperation>
          </ownedTools>
          <ownedTools xsi:type="tool:DoubleClickDescription" name="ComposedTaskWithDiagramDoubleClick" precondition="service:self.hasDiagram" mappings="//@ownedViewpoints[name='Process']/@ownedRepresentations[name='ComposedTask']/@defaultLayer/@containerMappings[name='ComposedTask']">
            <element name="element"/>
            <elementView name="elementView"/>
            <initialOperation>
              <firstModelOperations xsi:type="tool:Navigation" diagramDescription="//@ownedViewpoints[name='Process']/@ownedRepresentations[name='ComposedTask']"/>
            </initialOperation>
          </ownedTools>
          <ownedTools xsi:type="tool:ContainerCreationDescription" name="new Composed Task" containerMappings="//@ownedViewpoints[name='Process']/@ownedRepresentations[name='ComposedTask']/@defaultLayer/@containerMappings[name='ComposedTask']">
            <variable name="container"/>
            <viewVariable name="containerView"/>
            <initialOperation>
              <firstModelOperations xsi:type="tool:CreateInstance" typeName="process.ComposedTask" referenceName="tasks">
                <subModelOperations xsi:type="tool:SetValue" featureName="name" valueExpression="['Composed Task ' + container.oclAsType(ComposedTask).tasks->size()/]"/>
              </firstModelOperations>
            </initialOperation>
          </ownedTools>
          <ownedTools xsi:type="tool:ContainerCreationDescription" name="new Action Task" containerMappings="//@ownedViewpoints[name='Process']/@ownedRepresentations[name='ComposedTask']/@defaultLayer/@containerMappings[name='ActionTask']">
            <variable name="container"/>
            <viewVariable name="containerView"/>
            <initialOperation>
              <firstModelOperations xsi:type="tool:CreateInstance" typeName="process.ActionTask" referenceName="tasks">
                <subModelOperations xsi:type="tool:SetValue" featureName="name" valueExpression="['Action Task ' + container.oclAsType(ComposedTask).tasks->size()/]"/>
              </firstModelOperations>
            </initialOperation>
          </ownedTools>
          <ownedTools xsi:type="tool:ContainerDropDescription" mappings="//@ownedViewpoints[name='Process']/@ownedRepresentations[name='ComposedTask']/@defaultLayer/@containerMappings[name='ActionTask'] //@ownedViewpoints[name='Process']/@ownedRepresentations[name='ComposedTask']/@defaultLayer/@containerMappings[name='ComposedTask']">
            <oldContainer name="oldSemanticContainer"/>
            <newContainer name="newSemanticContainer"/>
            <element name="element"/>
            <newViewContainer name="newContainerView"/>
            <initialOperation>
              <firstModelOperations xsi:type="tool:ChangeContext" browseExpression="var:oldSemanticContainer">
                <subModelOperations xsi:type="tool:Unset" featureName="tasks" elementExpression="var:element"/>
                <subModelOperations xsi:type="tool:ChangeContext" browseExpression="var:newSemanticContainer">
                  <subModelOperations xsi:type="tool:SetValue" featureName="tasks" valueExpression="var:element"/>
                </subModelOperations>
              </firstModelOperations>
            </initialOperation>
          </ownedTools>
          <ownedTools xsi:type="tool:EdgeCreationDescription" name="set following Task" precondition="service:preSource.atSameLevel(preTarget)" edgeMappings="//@ownedViewpoints[name='Process']/@ownedRepresentations[name='ComposedTask']/@defaultLayer/@edgeMappings[name='FollowingTask']">
            <sourceVariable name="source"/>
            <targetVariable name="target"/>
            <sourceViewVariable name="sourceView"/>
            <targetViewVariable name="targetView"/>
            <initialOperation>
              <firstModelOperations xsi:type="tool:ChangeContext" browseExpression="var:source">
                <subModelOperations xsi:type="tool:SetValue" featureName="followingTasks" valueExpression="var:target"/>
              </firstModelOperations>
            </initialOperation>
          </ownedTools>
          <ownedTools xsi:type="tool:ReconnectEdgeDescription" name="reconnect FollowingTask source" precondition="service:source.atSameLevel(target)" reconnectionKind="RECONNECT_SOURCE">
            <source name="source"/>
            <target name="target"/>
            <sourceView name="sourceView"/>
            <targetView name="targetView"/>
            <element name="element"/>
            <initialOperation>
              <firstModelOperations xsi:type="tool:ChangeContext" browseExpression="var:source">
                <subModelOperations xsi:type="tool:Unset" featureName="followingTasks" elementExpression="[otherEnd.target/]"/>
                <subModelOperations xsi:type="tool:ChangeContext" browseExpression="var:target">
                  <subModelOperations xsi:type="tool:SetValue" featureName="followingTasks" valueExpression="[otherEnd.target/]"/>
                </subModelOperations>
              </firstModelOperations>
            </initialOperation>
            <edgeView name="edgeView"/>
          </ownedTools>
          <ownedTools xsi:type="tool:ReconnectEdgeDescription" name="reconnect FollowingTask target" precondition="service:source.atSameLevel(target)">
            <source name="source"/>
            <target name="target"/>
            <sourceView name="sourceView"/>
            <targetView name="targetView"/>
            <element name="element"/>
            <initialOperation>
              <firstModelOperations xsi:type="tool:ChangeContext" browseExpression="var:source">
                <subModelOperations xsi:type="tool:Unset" featureName="precedingTasks" elementExpression="[otherEnd.target/]"/>
                <subModelOperations xsi:type="tool:ChangeContext" browseExpression="var:target">
                  <subModelOperations xsi:type="tool:SetValue" featureName="precedingTasks" valueExpression="[otherEnd.target/]"/>
                </subModelOperations>
              </firstModelOperations>
            </initialOperation>
            <edgeView name="edgeView"/>
          </ownedTools>
          <ownedTools xsi:type="tool:DeleteElementDescription" name="NoDeletion" precondition="[false/]">
            <element name="element"/>
            <elementView name="elementView"/>
            <containerView name="containerView"/>
            <initialOperation>
              <firstModelOperations xsi:type="tool:CreateInstance" typeName="process.Process" referenceName="none"/>
            </initialOperation>
          </ownedTools>
          <ownedTools xsi:type="tool:DeleteElementDescription" name="DeleteFollowingTask">
            <element name="element"/>
            <elementView name="elementView"/>
            <containerView name="containerView"/>
            <initialOperation>
              <firstModelOperations xsi:type="tool:ChangeContext" browseExpression="var:element">
                <subModelOperations xsi:type="tool:Unset" featureName="followingTasks" elementExpression="[elementView.oclAsType(DEdge).targetNode.oclAsType(DSemanticDecorator).target/]"/>
              </firstModelOperations>
            </initialOperation>
          </ownedTools>
          <ownedTools xsi:type="tool:DeleteElementDescription" name="DeleteInitialTask">
            <element name="element"/>
            <elementView name="elementView"/>
            <containerView name="containerView"/>
            <initialOperation>
              <firstModelOperations xsi:type="tool:ChangeContext" browseExpression="var:element">
                <subModelOperations xsi:type="tool:Unset" featureName="initialTasks" elementExpression="[elementView.oclAsType(DEdge).targetNode.oclAsType(DSemanticDecorator).target/]"/>
              </firstModelOperations>
            </initialOperation>
          </ownedTools>
          <ownedTools xsi:type="tool:DeleteElementDescription" name="DeleteFinalTask">
            <element name="element"/>
            <elementView name="elementView"/>
            <containerView name="containerView"/>
            <initialOperation>
              <firstModelOperations xsi:type="tool:ChangeContext" browseExpression="var:element">
                <subModelOperations xsi:type="tool:Unset" featureName="finalTasks" elementExpression="[elementView.oclAsType(DEdge).targetNode.oclAsType(DSemanticDecorator).target/]"/>
              </firstModelOperations>
            </initialOperation>
          </ownedTools>
          <ownedTools xsi:type="tool:DirectEditLabel" name="TaskName">
            <mask mask="{0}"/>
            <initialOperation>
              <firstModelOperations xsi:type="tool:ChangeContext" browseExpression="element">
                <subModelOperations xsi:type="tool:SetValue" featureName="name" valueExpression="var:arg0"/>
              </firstModelOperations>
            </initialOperation>
          </ownedTools>
        </toolSections>
      </defaultLayer>
    </ownedRepresentations>
    <ownedJavaExtensions qualifiedClassName="fr.obeo.dsl.process.design.services.ProcessServices"/>
  </ownedViewpoints>
</description:Group>
