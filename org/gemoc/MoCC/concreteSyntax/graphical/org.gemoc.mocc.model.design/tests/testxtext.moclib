/*
 * CCSL specification
 * @author:  Julien Deantoni
 * date :  Tue September 20 2013  09:56:50 CEST 
 */

Library stateBasedTest{
	imports{
		 // import statements
		import "platform:/plugin/fr.inria.aoste.timesquare.ccslkernel.model/ccsllibrary/kernel.ccslLib" as lib0; 
		import "platform:/plugin/fr.inria.aoste.timesquare.ccslkernel.model/ccsllibrary/CCSL.ccslLib" as lib1; 
		
	}
	RelationLibrary stateBasedRelations{
		RelationDeclaration rel1(firstParam:clock, secondParam:clock)
		StateBasedRelationDefinition myDef[rel1]{
			init initS;
			State initS (
				out : init2intermediate ;
			)
			State interMediate(
				in : init2intermediate;
				out : intermediate2loop;
			)
			
			State loop (
				in : intermediate2loop, selfLoop;
				out : selfLoop;
			)
			
			from interMediate to loop : intermediate2loop(
				when firstParam		
			)
			
			from initS to interMediate : init2intermediate(
				when firstParam		
			)
			from loop to loop: selfLoop(
				when secondParam
				do kill (firstParam)
			)
		}
	}
}